exclude: |
    (?x)
    # NOT INSTALLABLE ADDONS
    # END NOT INSTALLABLE ADDONS
    # Files and folders generated by bots, to avoid loops
    ^setup/|/static/description/index\.html$|
    # We don't want to mess with tool-generated files
    .svg$|/tests/([^/]+/)?cassettes/|^.copier-answers.yml$|^.github/|
    # Maybe reactivate this when all README files include prettier ignore tags?
    ^README\.md$|README\.MD$|
    # Library files can have extraneous formatting (even minimized)
    /static/(src/)?lib/|
    # Repos using Sphinx to generate docs don't need prettying
    ^docs/_templates/.*\.html$|
    # You don't usually want a bot to modify your legal texts
    (LICENSE.*|COPYING.*)
default_language_version:
    python: python3
    node: "14.18.0"
#files: ^extra_addons/
repos:
    - repo: local
      hooks:
          # These files are most likely copier diff rejection junks; if found,
          # review them manually, fix the problem (if needed) and remove them
          - id: forbidden-files
            name: forbidden files
            entry: found forbidden files; remove them
            language: fail
            files: "\\.rej$"
    - repo: https://github.com/myint/autoflake
      rev: v2.2.1
      hooks:
          - id: autoflake
            args:
                - --expand-star-imports
                - --ignore-init-module-imports
                - --in-place
                - --remove-all-unused-imports
                - --remove-duplicate-keys
                - --remove-unused-variables
    - repo: https://github.com/psf/black
      rev: 23.12.0
      hooks:
          - id: black
    - repo: https://github.com/pre-commit/mirrors-prettier
      rev: v2.7.1
      hooks:
          - id: prettier
            name: prettier (with plugin-xml)
            additional_dependencies:
                - "prettier@2.7.1"
                - "@prettier/plugin-xml@2.2.0"
            args:
                - --plugin=@prettier/plugin-xml
            files: \.(css|htm|html|js|json|jsx|less|md|scss|toml|ts|xml|yaml|yml)$
    - repo: https://github.com/pre-commit/mirrors-eslint
      rev: v8.55.0
      hooks:
          - id: eslint
            verbose: true
            args:
                - --color
                - --fix
    - repo: https://github.com/asottile/pyupgrade
      rev: v3.15.0
      hooks:
          - id: pyupgrade
            args: ["--keep-percent-format"]
    - repo: https://github.com/PyCQA/isort
      rev: 5.13.1
      hooks:
          - id: isort
            name: isort except __init__.py
            args:
                - --settings=.
            exclude: /__init__\.py$
    - repo: https://github.com/pre-commit/pre-commit-hooks
      rev: v4.5.0
      hooks:
          - id: trailing-whitespace
            # exclude autogenerated files
            exclude: /README\.rst$|\.pot?$
          - id: end-of-file-fixer
            # exclude autogenerated files
            exclude: /README\.rst$|\.pot?$
          - id: debug-statements
          - id: fix-encoding-pragma
            args: ["--remove"]
          - id: check-case-conflict
          - id: check-docstring-first
          - id: check-executables-have-shebangs
          - id: check-merge-conflict
            # exclude files where underlines are not distinguishable from merge conflicts
            exclude: /README\.rst$|^docs/.*\.rst$
          - id: check-symlinks
          - id: check-xml
          - id: mixed-line-ending
            args: ["--fix=lf"]
    - repo: https://github.com/PyCQA/flake8
      rev: 6.1.0
      hooks:
          - id: flake8
            name: flake8 except __init__.py __manifest__.py
            exclude: /__init__\.py$|/__manifest__\.py$
            additional_dependencies: ["flake8-bugbear==23.9.16"]
          - id: flake8
            name: flake8 only __init__.py
            args: ["--extend-ignore=F401"] # ignore unused imports in __init__.py
            files: /__init__\.py$
            additional_dependencies: ["flake8-bugbear==23.9.16"]
          - id: flake8
            name: flake8 only __manifest__.py
            args: ["--extend-ignore=B018"] # found useless expression. either assign it to a variable or remove it in __manifest__.py
            files: /__manifest__\.py$
            additional_dependencies: ["flake8-bugbear==23.9.16"]
    - repo: https://github.com/OCA/pylint-odoo
      rev: v9.0.4
      hooks:
          - id: pylint_odoo
            name: pylint with optional checks
            args:
                - --rcfile=.pylintrc
                - --exit-zero
            verbose: true
            additional_dependencies:
                - isort==5.13.1
          - id: pylint_odoo
            args:
                - --rcfile=.pylintrc-mandatory
            additional_dependencies:
                - isort==5.13.1
    - repo: https://github.com/PyCQA/bandit
      rev: 1.7.6
      hooks:
          - id: bandit
    - repo: https://github.com/OCA/odoo-pre-commit-hooks
      rev: v0.0.29
      hooks:
          #      - id: oca-checks-odoo-module
          - id: oca-checks-po
            args: ["--fix"]
#  - repo: https://github.com/acsone/setuptools-odoo
#    rev: 3.2.0
#    hooks:
#      - id: setuptools-odoo-make-default
#      - id: setuptools-odoo-get-requirements
#        args:
#          - --output
#          - requirements.txt
#          - --header
#          - "# generated from manifests external_dependencies"
